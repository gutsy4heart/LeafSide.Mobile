# Исправление проблемы с .env файлом

## Проблема
Книги не отображаются в приложении из-за неправильной настройки переменных окружения.

## Решение

### 1. Проверьте файл .env

Убедитесь, что файл `.env` в корне проекта `LeafSide.Mobile` содержит:

```env
EXPO_PUBLIC_API_URL=http://10.0.2.2:5233
```

**Важно:**
- Переменная должна начинаться с `EXPO_PUBLIC_`
- Не должно быть пробелов вокруг `=`
- Не должно быть кавычек вокруг значения
- URL должен быть правильным для вашей платформы

### 2. URL для разных платформ

**Android эмулятор:**
```env
EXPO_PUBLIC_API_URL=http://10.0.2.2:5233
```

**iOS симулятор:**
```env
EXPO_PUBLIC_API_URL=http://127.0.0.1:5233
```

**Реальное устройство:**
1. Узнайте IP адрес вашего компьютера:
   ```powershell
   ipconfig
   # Найдите IPv4 адрес (например, 192.168.1.69)
   ```

2. Обновите .env:
   ```env
   EXPO_PUBLIC_API_URL=http://192.168.1.69:5233
   ```

### 3. Перезапустите Expo

**ВАЖНО:** После изменения `.env` файла нужно:
1. Остановить Expo (Ctrl+C)
2. Очистить кэш: `npx expo start --clear`
3. Или полностью перезапустить: `npm start`

### 4. Проверка

После перезапуска проверьте логи в консоли:
- Должно быть: `[app.config] EXPO_PUBLIC_API_URL from env: http://...`
- Должно быть: `[Config] API Base URL: http://...`
- Должно быть: `[API] GET http://.../api/Books`

### 5. Если не работает

1. **Проверьте, что бэкенд запущен:**
   ```powershell
   cd LeafSide-backend\LeafSide.API
   dotnet run
   ```

2. **Проверьте доступность API:**
   ```powershell
   # В браузере или curl
   http://localhost:5233/api/Books
   ```

3. **Проверьте CORS в бэкенде:**
   - В `Program.cs` должно быть `app.UseCors("MobilePolicy")`
   - Policy должен разрешать все origins

4. **Проверьте файрвол:**
   - Убедитесь, что порт 5233 открыт
   - Для реального устройства проверьте, что компьютер и телефон в одной сети Wi-Fi

### 6. Альтернативный способ (если .env не работает)

Можно установить переменную окружения напрямую в терминале перед запуском:

**Windows PowerShell:**
```powershell
$env:EXPO_PUBLIC_API_URL="http://10.0.2.2:5233"
npx expo start --clear
```

**Windows CMD:**
```cmd
set EXPO_PUBLIC_API_URL=http://10.0.2.2:5233
npx expo start --clear
```

**Linux/Mac:**
```bash
export EXPO_PUBLIC_API_URL=http://10.0.2.2:5233
npx expo start --clear
```

## Текущая конфигурация

Файл `.env` создан с содержимым:
```
EXPO_PUBLIC_API_URL=http://10.0.2.2:5233
```

Это значение по умолчанию для Android эмулятора. Если вы используете iOS симулятор или реальное устройство, измените URL соответственно.

